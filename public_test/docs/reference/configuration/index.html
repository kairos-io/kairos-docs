<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Configuration | Kairos</title>
<meta name="description" content="Welcome to the Kairos configuration reference page. This page provides details on the fields available in the YAML file used for installing Kairos, a Linux distribution focused on running Kubernetes. This file, written in cloud-config format, allows you to enable Kairos features, configure k3s, and set various other options.">
<meta property="og:url" content="https://kairos.io/docs/reference/configuration/">
  <meta property="og:site_name" content="Kairos">
  <meta property="og:title" content="Configuration">
  <meta property="og:description" content="Welcome to the Kairos configuration reference page. This page provides details on the fields available in the YAML file used for installing Kairos, a Linux distribution focused on running Kubernetes. This file, written in cloud-config format, allows you to enable Kairos features, configure k3s, and set various other options.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">
    <meta property="article:published_time" content="2022-11-13T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-10-20T08:48:34+03:00">
    <meta property="og:image" content="https://kairos.io/images/Kairos_800x419.png">

  <meta itemprop="name" content="Configuration">
  <meta itemprop="description" content="Welcome to the Kairos configuration reference page. This page provides details on the fields available in the YAML file used for installing Kairos, a Linux distribution focused on running Kubernetes. This file, written in cloud-config format, allows you to enable Kairos features, configure k3s, and set various other options.">
  <meta itemprop="datePublished" content="2022-11-13T00:00:00+00:00">
  <meta itemprop="dateModified" content="2025-10-20T08:48:34+03:00">
  <meta itemprop="wordCount" content="4633">
  <meta itemprop="image" content="https://kairos.io/images/Kairos_800x419.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://kairos.io/images/Kairos_800x419.png">
  <meta name="twitter:title" content="Configuration">
  <meta name="twitter:description" content="Welcome to the Kairos configuration reference page. This page provides details on the fields available in the YAML file used for installing Kairos, a Linux distribution focused on running Kubernetes. This file, written in cloud-config format, allows you to enable Kairos features, configure k3s, and set various other options.">
      <meta name="twitter:site" content="@Kairos_OSS">
<link rel="preload" href="/scss/main.scss" as="style" integrity="" crossorigin="anonymous">
<link href="/scss/main.scss" rel="stylesheet">
<script
  src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
  crossorigin="anonymous"></script>
<script defer
  src="https://unpkg.com/lunr@2.3.9/lunr.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Mono:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">
<script defer data-domain="kairos.io" src="https://plausible.io/js/script.outbound-links.tagged-events.js"></script>
<script>window.plausible = window.plausible || function() { (window.plausible.q = window.plausible.q || []).push(arguments) }</script>

<script type="module" src="/js/kairos.9086b05855f0beebae6a1adfe52a8db6351e5ad523c65f8ebdad68dcf69ccd751e3d4dd95553ca3ae13ebc022f180f2d00bda9e0402704807a6d02fb14ca0381.js" integrity="sha512-kIawWFXwvuuuahrf5SqNtjUeWtUjxl&#43;Ova1o3PaczXUePU3ZVVPKOuE&#43;vAIvGA8tAL2p4EAnBIB6bQL7FMoDgQ==" defer></script>
<script async defer src="https://buttons.github.io/buttons.js"></script>

  </head>
  <body class="td-page">
    <header>
      <nav class="td-navbar js-navbar-scroll" data-bs-theme="dark">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"><svg width="30" height="30" viewBox="0 0 137 137" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="24.8171" height="24.8171" transform="matrix(-0.86601 0.500028 -3.18907e-05 1 68.502 18.8594)" fill="#EE5007"/><rect width="24.8171" height="24.8171" transform="matrix(-0.86601 -0.500028 3.18907e-05 1 47.0088 31.2695)" fill="#FF7442"/><rect width="24.8171" height="24.8171" transform="matrix(-0.866041 0.499972 0.866041 0.499972 47.0088 6.45312)" fill="#FB9E70"/><rect width="24.8171" height="24.8171" transform="matrix(3.19859e-05 1 0.86601 0.500028 25.5139 43.6797)" fill="#FF7442"/><rect width="24.8171" height="24.8171" transform="matrix(-0.866041 0.499973 0.866041 0.499972 25.5139 68.4922)" fill="#FB9E70"/><rect width="24.8171" height="24.8171" transform="matrix(-3.17834e-05 1 0.866009 -0.500028 4.02271 56.0898)" fill="#EE5007"/><rect width="24.8171" height="24.8171" transform="matrix(-0.86601 0.500028 -3.19781e-05 1 68.5042 93.3125)" fill="#EE5007"/><rect width="24.8171" height="24.8171" transform="matrix(-0.866009 -0.500028 3.18033e-05 1 47.011 105.723)" fill="#FF7442"/><rect width="24.8171" height="24.8171" transform="matrix(-0.866041 0.499972 0.866041 0.499973 47.011 80.9062)" fill="#FB9E70"/><rect width="24.8171" height="24.8171" transform="matrix(0.86601 -0.500028 3.18907e-05 -1 68.4985 118.141)" fill="#EE5007"/><rect width="24.8171" height="24.8171" transform="matrix(0.86601 0.500028 -3.18907e-05 -1 89.9917 105.73)" fill="#FF7442"/><rect width="24.8171" height="24.8171" transform="matrix(0.866041 -0.499972 -0.866041 -0.499972 89.9917 130.547)" fill="#FB9E70"/><rect width="24.8171" height="24.8171" transform="matrix(-0.86601 0.500028 -3.19781e-05 1 132.979 56.0859)" fill="#EE5007"/><rect width="24.8171" height="24.8171" transform="matrix(-0.866009 -0.500028 3.18033e-05 1 111.486 68.4961)" fill="#FF7442"/><rect width="24.8171" height="24.8171" transform="matrix(-0.866041 0.499972 0.866041 0.499973 111.486 43.6797)" fill="#FB9E70"/><rect width="24.8171" height="24.8171" transform="matrix(0.86601 -0.500028 3.18907e-05 -1 68.5002 43.6875)" fill="#EE5007"/><rect width="24.8171" height="24.8171" transform="matrix(0.86601 0.500028 -3.18907e-05 -1 89.9934 31.2773)" fill="#FF7442"/><rect width="24.8171" height="24.8171" transform="matrix(0.866041 -0.499972 -0.866041 -0.499972 89.9934 56.0938)" fill="#FB9E70"/></svg></span><span class="navbar-brand__name">Kairos</span></a>
  
  <button class="navbar-burger d-lg-none ms-auto" id="navbar-burger" aria-label="Toggle navigation" type="button" style="background:none;border:none;outline:none;">
    <span style="display:block;width:30px;height:3px;background:#fff;margin:4px 0;"></span>
    <span style="display:block;width:30px;height:3px;background:#fff;margin:4px 0;"></span>
    <span style="display:block;width:30px;height:3px;background:#fff;margin:4px 0;"></span>
  </button>
  
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav" id="navbar-links">
      <li class="nav-item">
        <a class="nav-link" href="/getting-started/"><span>Getting Started</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/community/"><span>Community</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/blog/"><span>Blog</span></a>
      </li>
      <li class="nav-item dropdown">
        <button class="btn btn-link nav-link dropdown-toggle d-flex align-items-center" id="distro-select" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" data-distro="rhel;roskylinux;9" aria-label="Toggle Flavor">
    Rockylinux 9
</button>
<ul class="dropdown-menu" aria-labelledby="bd-flavor-text">
    <li>
        <button type="button" class="dropdown-item d-flex align-items-center distro-option" data-distro="alpine;alpine;3.19" aria-pressed="false">
        Alpine 3.19
        </button>
    </li>
    <li>
        <button type="button" class="dropdown-item d-flex align-items-center distro-option" data-distro="debian;debian;bookworm" aria-pressed="false">
        Debian Bookworm
        </button>
    </li>
    <li>
        <button type="button" class="dropdown-item d-flex align-items-center distro-option" data-distro="debian;debian;testing" aria-pressed="false">
        Debian Testing
        </button>
    </li>
    <li>
        <button type="button" class="dropdown-item d-flex align-items-center distro-option" data-distro="rhel;fedora;40" aria-pressed="false">
        Fedora 40
        </button>
    </li>
    <li>
        <button type="button" class="dropdown-item d-flex align-items-center distro-option" data-distro="opensuse;opensuse;leap-15.6" aria-pressed="false">
        openSUSE Leap-15.6
        </button>
    </li>
    <li>
        <button type="button" class="dropdown-item d-flex align-items-center distro-option" data-distro="opensuse;opensuse;tumbleweed" aria-pressed="false">
        openSUSE Tumbleweed
        </button>
    </li>
    <li>
        <button type="button" class="dropdown-item d-flex align-items-center distro-option" data-distro="rhel;rockylinux;9" aria-pressed="true">
        Rockylinux 9
        </button>
    </li>
    <li>
        <button type="button" class="dropdown-item d-flex align-items-center distro-option" data-distro="ubuntu;ubuntu;24.10" aria-pressed="false">
        Ubuntu 24.10
        </button>
    </li>
    <li>
        <button type="button" class="dropdown-item d-flex align-items-center distro-option" data-distro="ubuntu;ubuntu;24.04" aria-pressed="false">
        Ubuntu 24.04
        </button>
    </li>
    <li>
        <button type="button" class="dropdown-item d-flex align-items-center distro-option" data-distro="ubuntu;ubuntu;22.04" aria-pressed="false">
        Ubuntu 22.04
        </button>
    </li>
    <li>
        <button type="button" class="dropdown-item d-flex align-items-center distro-option" data-distro="ubuntu;ubuntu;20.04" aria-pressed="false">
        Ubuntu 20.04
        </button>
    </li>
</ul> 
      </li>
      
      <li class="nav-item mr-4 mb-2 mb-lg-0 mt-lg-2 d-none d-lg-block">
        <li class="nav-item mr-4 mb-2 mb-lg-0 mt-lg-2">
    <a class="github-button" href="https://github.com/kairos-io/kairos" data-size="large" data-show-count="true" aria-label="Star kairos-io/kairos on GitHub">Star</a>
</li> 
      </li>
      <li class="td-light-dark-menu nav-item dropdown">
        <svg xmlns="http://www.w3.org/2000/svg" class="d-none">
  <symbol id="check2" viewBox="0 0 16 16">
    <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/>
  </symbol>
  <symbol id="circle-half" viewBox="0 0 16 16">
    <path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"/>
  </symbol>
  <symbol id="moon-stars-fill" viewBox="0 0 16 16">
    <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
    <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/>
  </symbol>
  <symbol id="sun-fill" viewBox="0 0 16 16">
    <path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
  </symbol>
</svg>

<button class="btn btn-link nav-link dropdown-toggle d-flex align-items-center"
        id="bd-theme"
        type="button"
        aria-expanded="false"
        data-bs-toggle="dropdown"
        data-bs-display="static"
        aria-label="Toggle theme (auto)">
  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg>
</button>
<ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
  <li>
    <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
      <svg class="bi me-2 opacity-50"><use href="#sun-fill"></use></svg>
      Light
      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg>
    </button>
  </li>
  <li>
    <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
      <svg class="bi me-2 opacity-50"><use href="#moon-stars-fill"></use></svg>
      Dark
      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg>
    </button>
  </li>
  <li>
    <button type="button" class="dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
      <svg class="bi me-2 opacity-50"><use href="#circle-half"></use></svg>
      Auto
      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg>
    </button>
  </li>
</ul>

      </li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/offline-search-index.2cd40d81f421519107d8c788686e9696.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
  </div>
</div>
</nav>


<style>
   
  @media (max-width: 991.98px) {
     
    .navbar-burger {
      position: fixed;
      top: 12px;
      right: 16px;
      z-index: 3000;
      background: none;
      border: none;
      outline: none;
      padding: 0;
      width: 48px;
      height: 48px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    #main_navbar {
      display: none;
    }
    #main_navbar.show-mobile-menu {
      display: block;
      position: fixed;
      top: 60px;  
      left: 0;
      width: 100vw;
      height: calc(100vh - 60px);  
      background: #03153A;
      z-index: 2000;
      overflow-y: auto;
      transition: all 0.3s;
    }
    #navbar-links {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      padding: 2rem 1.5rem;
      width: 100%;
      height: 100%;
    }
    #navbar-links .nav-item {
      margin-bottom: 1.5rem;
      width: 100%;
    }
    #navbar-links .nav-link {
      width: 100%;
      font-size: 1.25rem;
    }
     
    .td-navbar-nav-scroll .dropdown-menu {
      position: absolute !important;
      left: 0 !important;
      right: auto !important;
      top: 100% !important;
      bottom: auto !important;
      min-width: 200px;
      margin-top: 0.5rem !important;  
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }
    .td-navbar-nav-scroll .nav-item.dropdown {
      position: relative !important;
    }
    .td-navbar-nav-scroll .nav-item.dropdown > .nav-link,
    .td-navbar-nav-scroll .nav-item.dropdown > a {
      margin-bottom: 0 !important;
      padding-bottom: 0 !important;
    }
  }
   
  @media (max-width: 991.98px) {
    #main_navbar.show-mobile-menu { display: block; }
  }
</style>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    var burger = document.getElementById('navbar-burger');
    var navbar = document.getElementById('main_navbar');
    if (burger && navbar) {
      burger.addEventListener('click', function() {
        navbar.classList.toggle('show-mobile-menu');
      });
    }
  });
</script>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            <div id="td-sidebar-menu" class="td-sidebar__inner">
  <div id="content-mobile">
  <form class="td-sidebar__search d-flex align-items-center">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/offline-search-index.2cd40d81f421519107d8c788686e9696.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type="button" data-bs-toggle="collapse" data-bs-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  </div>
  <div id="content-desktop"></div>
  <nav class="td-sidebar-nav collapse td-sidebar-nav--search-disabled" id="td-section-nav">
    <ul class="td-sidebar-nav__section pe-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docs-li">
  <a href="/docs/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-docs"><span class="">Documentation</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsannouncements-li">
  <a href="/docs/announcements/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docsannouncements"><i class="fa-solid fa-bullhorn"></i><span class="">Announcements</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsinstallation-li">
  <a href="/docs/installation/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docsinstallation"><i class="fa-regular fa-computer"></i><span class="">Installation</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsinstallationcheck-the-signatures-li">
  <a href="/docs/installation/check-the-signatures/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsinstallationcheck-the-signatures"><span class="">Check the Signatures</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsinstallationaws-li">
  <a href="/docs/installation/aws/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsinstallationaws"><span class="">Installation on AWS</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsinstallationinteractive-li">
  <a href="/docs/installation/interactive/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsinstallationinteractive"><span class="">Interactive</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsinstallationmanual-li">
  <a href="/docs/installation/manual/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsinstallationmanual"><span class="">Manual installation</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsinstallationqrcode-li">
  <a href="/docs/installation/qrcode/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsinstallationqrcode"><span class="">QR Code</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsinstallationwebui-li">
  <a href="/docs/installation/webui/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsinstallationwebui"><span class="">WebUI</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsinstallationazure-li">
  <a href="/docs/installation/azure/" title="Installation on Microsoft Azure" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsinstallationazure"><span class="">Installation on Azure</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsinstallationgce-li">
  <a href="/docs/installation/gce/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsinstallationgce"><span class="">Installation on Google Cloud</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsinstallationautomated-li">
  <a href="/docs/installation/automated/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsinstallationautomated"><span class="">Automated</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsinstallationbare-metal-li">
  <a href="/docs/installation/bare-metal/" title="Installing on Bare-Metal" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsinstallationbare-metal"><span class="">Bare-Metal</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsinstallationnvidia_agx_orin-li">
  <a href="/docs/installation/nvidia_agx_orin/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsinstallationnvidia_agx_orin"><span class="">Nvidia AGX Orin</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsinstallationraspberry-li">
  <a href="/docs/installation/raspberry/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsinstallationraspberry"><span class="">RaspberryPi</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsinstallationnetboot-li">
  <a href="/docs/installation/netboot/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsinstallationnetboot"><span class="">Network booting</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsinstallationp2p-li">
  <a href="/docs/installation/p2p/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsinstallationp2p"><span class="">P2P support</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsinstallationtrustedboot-li">
  <a href="/docs/installation/trustedboot/" title="Trusted Boot Installations" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsinstallationtrustedboot"><span class="">Trusted Boot</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsinstallationtakeover-li">
  <a href="/docs/installation/takeover/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsinstallationtakeover"><span class="">Takeover</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsupgrade-li">
  <a href="/docs/upgrade/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docsupgrade"><i class="fa-regular fa-cloud-arrow-up"></i><span class="">Upgrade</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsupgrademanual-li">
  <a href="/docs/upgrade/manual/" title="Manual Upgrades" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsupgrademanual"><span class="">Manual</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsupgradekubernetes-li">
  <a href="/docs/upgrade/kubernetes/" title="Upgrading from Kubernetes" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsupgradekubernetes"><span class="">From Kubernetes</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsupgradekairos-operator-li">
  <a href="/docs/upgrade/kairos-operator/" title="Installing Kairos Operator" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsupgradekairos-operator"><span class="">Kairos Operator</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsupgradesystem-upgrade-controller-li">
  <a href="/docs/upgrade/system-upgrade-controller/" title="Installing system-upgrade-controller (Deprecated)" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsupgradesystem-upgrade-controller"><span class="">System Upgrade Controller (Deprecated)</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsupgradetrustedboot-li">
  <a href="/docs/upgrade/trustedboot/" title="Trusted Boot Upgrades" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsupgradetrustedboot"><span class="">Trusted Boot</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsupgradeboot_assessment-li">
  <a href="/docs/upgrade/boot_assessment/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsupgradeboot_assessment"><span class="">Boot assessment</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsarchitecture-li">
  <a href="/docs/architecture/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docsarchitecture"><i class="fa-regular fa-diagram-project"></i><span class="">Architecture</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsarchitectureimmutable-li">
  <a href="/docs/architecture/immutable/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsarchitectureimmutable"><span class="">Immutable</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsarchitecturecontainer-li">
  <a href="/docs/architecture/container/" title="Container based" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsarchitecturecontainer"><span class="">Container</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsarchitecturesecureboot-li">
  <a href="/docs/architecture/secureboot/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsarchitecturesecureboot"><span class="">SecureBoot support</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsarchitecturecloud-init-li">
  <a href="/docs/architecture/cloud-init/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsarchitecturecloud-init"><span class="">Cloud init based</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsarchitecturemeta-li">
  <a href="/docs/architecture/meta/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsarchitecturemeta"><span class="">Meta-Distribution</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsarchitecturenetwork-li">
  <a href="/docs/architecture/network/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsarchitecturenetwork"><span class="">P2P Network</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsarchitecturetrustedboot-li">
  <a href="/docs/architecture/trustedboot/" title="Trusted Boot Architecture" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsarchitecturetrustedboot"><span class="">Trusted Boot</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsadvanced-li">
  <a href="/docs/advanced/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docsadvanced"><i class="fa-regular fa-gear"></i><span class="">Advanced</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsadvancedafter-install-li">
  <a href="/docs/advanced/after-install/" title="Pushing configuration to a node after installation" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsadvancedafter-install"><span class="">After install</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsadvancedconfiguring_partitions-li">
  <a href="/docs/advanced/configuring_partitions/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsadvancedconfiguring_partitions"><span class="">Configuring partitions</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsadvancedcreating_custom_cloud_images-li">
  <a href="/docs/advanced/creating_custom_cloud_images/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsadvancedcreating_custom_cloud_images"><span class="">Creating Custom Cloud Images</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsadvancedprivate_registry_auth-li">
  <a href="/docs/advanced/private_registry_auth/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsadvancedprivate_registry_auth"><span class="">Private registries authentication</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsadvancedcustomizing-li">
  <a href="/docs/advanced/customizing/" title="Customizing the system image" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsadvancedcustomizing"><span class="">Customization</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsadvancedbuild-li">
  <a href="/docs/advanced/build/" title="Build Kairos appliances" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsadvancedbuild"><span class="">Build</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsadvancedsys-extensions-li">
  <a href="/docs/advanced/sys-extensions/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsadvancedsys-extensions"><span class="">Extending the system with systemd extensions</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsadvancednetworking-li">
  <a href="/docs/advanced/networking/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsadvancednetworking"><span class="">Networking</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsadvancedadding_opt_to_system_extensions-li">
  <a href="/docs/advanced/adding_opt_to_system_extensions/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsadvancedadding_opt_to_system_extensions"><span class="">Using /opt with System Extensions</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsadvancedbundles-li">
  <a href="/docs/advanced/bundles/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsadvancedbundles"><span class="">Bundles</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsadvancedpartition_encryption-li">
  <a href="/docs/advanced/partition_encryption/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsadvancedpartition_encryption"><span class="">Encrypting User Data with Kairos</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsadvancedcoco-li">
  <a href="/docs/advanced/coco/" title="Confidential computing setup" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsadvancedcoco"><span class="">Confidential Computing</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsadvancedrevoking-secureboot-access-li">
  <a href="/docs/advanced/revoking-secureboot-access/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsadvancedrevoking-secureboot-access"><span class="">Revoking secure boot access</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsexamples-li">
  <a href="/docs/examples/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docsexamples"><i class="fa-regular fa-file"></i><span class="">Examples</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexamplesboot_assessment_trusted_boot-li">
  <a href="/docs/examples/boot_assessment_trusted_boot/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplesboot_assessment_trusted_boot"><span class="">Enabling Automatic Boot Assessment with Trusted Boot</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexampleskubeadm-provider-li">
  <a href="/docs/examples/kubeadm-provider/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexampleskubeadm-provider"><span class="">A Minimal Single-Node Kubernetes with Kubeadm</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexamplesextra_persistent_paths_after_install-li">
  <a href="/docs/examples/extra_persistent_paths_after_install/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplesextra_persistent_paths_after_install"><span class="">Adding persistent paths after install</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexamplesairgap-li">
  <a href="/docs/examples/airgap/" title="How to Create an Airgap K3s Installation with Kairos" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplesairgap"><span class="">Airgapped ISO</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexamplesbandwidth-optimized-upgrades-li">
  <a href="/docs/examples/bandwidth-optimized-upgrades/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplesbandwidth-optimized-upgrades"><span class="">Bandwidth Optimized Upgrades</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexamplesbundles-li">
  <a href="/docs/examples/bundles/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplesbundles"><span class="">Bundles</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexamplestrusted-boot-firmware-sysext-li">
  <a href="/docs/examples/trusted-boot-firmware-sysext/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplestrusted-boot-firmware-sysext"><span class="">Deploying kernel firmware via sysext on Trusted Boot</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexampleskdump-li">
  <a href="/docs/examples/kdump/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexampleskdump"><span class="">Enabling kdump</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexamplesopenamt-li">
  <a href="/docs/examples/openamt/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplesopenamt"><span class="">Intel Open AMT Registration</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexampleskeylime-li">
  <a href="/docs/examples/keylime/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexampleskeylime"><span class="">Keylime agent</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexampleslocalai-li">
  <a href="/docs/examples/localai/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexampleslocalai"><span class="">LocalAI</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexamplesmulti-node-li">
  <a href="/docs/examples/multi-node/" title="Manual Multi-Node Cluster" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplesmulti-node"><span class="">Manual multi-node cluster</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexamplesha-li">
  <a href="/docs/examples/ha/" title="Manual Multi-Node High Availability Cluster" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplesha"><span class="">Manual multi-node HA cluster</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexamplessingle-node-li">
  <a href="/docs/examples/single-node/" title="Manual Single-Node Cluster" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplessingle-node"><span class="">Manual single-node cluster</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexamplesmetallb-li">
  <a href="/docs/examples/metallb/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplesmetallb"><span class="">MetalLB</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexamplesp2p_e2e-li">
  <a href="/docs/examples/p2p_e2e/" title="P2P Multi-Node Cluster Provisioned via Netboot" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplesp2p_e2e"><span class="">P2P multi-node cluster netboot</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexamplesk3s-stages-li">
  <a href="/docs/examples/k3s-stages/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplesk3s-stages"><span class="">Run stages along with K3s</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexamplessingle-node-p2p-li">
  <a href="/docs/examples/single-node-p2p/" title="Self-configured P2P Single-Node Cluster" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplessingle-node-p2p"><span class="">Self-configured P2P single-node cluster</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexamplesmulti-node-p2p-li">
  <a href="/docs/examples/multi-node-p2p/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplesmulti-node-p2p"><span class="">Self-coordinating P2P multi-node cluster</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexamplesmulti-node-p2p-ha-li">
  <a href="/docs/examples/multi-node-p2p-ha/" title="Self-coordinating P2P Multi-Node Cluster with High Availability" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplesmulti-node-p2p-ha"><span class="">Self-coordinating P2P multi-node cluster HA</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexamplesmulti-node-p2p-ha-kubevip-li">
  <a href="/docs/examples/multi-node-p2p-ha-kubevip/" title="Self-coordinating P2P Multi-Node Cluster with High Availability and KubeVIP" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplesmulti-node-p2p-ha-kubevip"><span class="">Self-coordinating P2P multi-node cluster HA with KubeVIP</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexamplesvirtual-box-li">
  <a href="/docs/examples/virtual-box/" title="Kairos&#39; Trusted Boot in Virtual Box" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplesvirtual-box"><span class="">Trusted Boot in Virtual Box</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexamplescore-li">
  <a href="/docs/examples/core/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplescore"><span class="">Using Kairos Core Images as an Installer</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexampleswifi-li">
  <a href="/docs/examples/wifi/" title="Configuring WiFi via Cloud-Config" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexampleswifi"><span class="">WiFi</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docsreference-li">
  <a href="/docs/reference/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docsreference"><i class="fa-regular fa-book"></i><span class="">Reference</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsreferenceartifacts-li">
  <a href="/docs/reference/artifacts/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsreferenceartifacts"><span class="">Artifact Naming Convention</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsreferencearchitecture-li">
  <a href="/docs/reference/architecture/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsreferencearchitecture"><span class="">Architecture</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsreferenceauroraboot-li">
  <a href="/docs/reference/auroraboot/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsreferenceauroraboot"><span class="">AuroraBoot</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-docsreferenceconfiguration-li">
  <a href="/docs/reference/configuration/" class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id="m-docsreferenceconfiguration"><span class="td-sidebar-nav-active-item">Configuration</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsreferencestage_modules-li">
  <a href="/docs/reference/stage_modules/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsreferencestage_modules"><span class="">Stage modules</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsreferencekairosctl-li">
  <a href="/docs/reference/kairosctl/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsreferencekairosctl"><span class="">kairosctl</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsreferencereset-li">
  <a href="/docs/reference/reset/" title="Reset a node" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsreferencereset"><span class="">Reset</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsreferencekairos-factory-li">
  <a href="/docs/reference/kairos-factory/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsreferencekairos-factory"><span class="">The Kairos Factory</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsreferenceimage_matrix-li">
  <a href="/docs/reference/image_matrix/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsreferenceimage_matrix"><span class="">Image support matrix</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsreferencebuild-from-scratch-li">
  <a href="/docs/reference/build-from-scratch/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsreferencebuild-from-scratch"><span class="">Build Kairos from scratch</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsreferencebuild_raw_images_with_qemu-li">
  <a href="/docs/reference/build_raw_images_with_qemu/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsreferencebuild_raw_images_with_qemu"><span class="">Build Raw images with QEMU</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsreferencetroubleshooting-li">
  <a href="/docs/reference/troubleshooting/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsreferencetroubleshooting"><span class="">Troubleshooting</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsreferencerecovery_mode-li">
  <a href="/docs/reference/recovery_mode/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsreferencerecovery_mode"><span class="">Recovery mode</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsreferenceentangle-li">
  <a href="/docs/reference/entangle/" title="Entangle CRDs" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsreferenceentangle"><span class="">Entangle</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsreferencefaq-li">
  <a href="/docs/reference/faq/" title="FAQ" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsreferencefaq"><span class="">Frequently asked questions</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsreferencealerts-li">
  <a href="/docs/reference/alerts/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsreferencealerts"><span class="">Alerts Styling</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsdevelopment-li">
  <a href="/docs/development/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docsdevelopment"><i class="fa-regular fa-terminal"></i><span class="">Development</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsdevelopmentdevelopment-li">
  <a href="/docs/development/development/" title="Development notes" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsdevelopmentdevelopment"><span class="">Development</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsdevelopmentdebugging-station-li">
  <a href="/docs/development/debugging-station/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsdevelopmentdebugging-station"><span class="">Debugging station</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsdevelopmentnvidia-li">
  <a href="/docs/development/nvidia/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsdevelopmentnvidia"><span class="">Booting Kairos on Nvidia Jetson ARM</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsmedia-li">
  <a href="/docs/media/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docsmedia"><i class="fa-regular fa-circle-play"></i><span class="">Media</span></a>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            <div class="td-page-meta ms-2 pb-1 pt-2 mb-0">
<a href="https://github.com/kairos-io/kairos-docs/tree/main/content/en/docs/Reference/configuration.md" class="td-page-meta--view td-page-meta__view" target="_blank" rel="noopener"><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
  <a href="https://github.com/kairos-io/kairos-docs/edit/main/content/en/docs/Reference/configuration.md" class="td-page-meta--edit td-page-meta__edit" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
  <a href="https://github.com/kairos-io/kairos-docs/new/main/content/en/docs/Reference?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" class="td-page-meta--child td-page-meta__child" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
  <a href="https://github.com/kairos-io/kairos-docs/issues/new?title=Configuration" class="td-page-meta--issue td-page-meta__issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create documentation issue</a>
  <a href="https://github.com/kairos-io/kairos/issues/new" class="td-page-meta--project td-page-meta__project-issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create project issue</a>
  
</div>

            <div class="td-toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#syntax">Syntax</a>
      <ul>
        <li><a href="#test-your-cloud-configs">Test your cloud configs</a></li>
        <li><a href="#validate-your-cloud-config">Validate Your Cloud Config</a></li>
        <li><a href="#using-templates">Using templates</a></li>
        <li><a href="#grub-options">Grub options</a></li>
      </ul>
    </li>
    <li><a href="#kubernetes-manifests">Kubernetes manifests</a></li>
    <li><a href="#kernel-boot-parameters">Kernel boot parameters</a></li>
    <li><a href="#additional-users">Additional users</a>
      <ul>
        <li><a href="#add-a-user">Add a user</a></li>
      </ul>
    </li>
    <li><a href="#provider-configs">Provider configs</a></li>
    <li><a href="#stages">Stages</a></li>
    <li><a href="#logs-configuration">Logs Configuration</a>
      <ul>
        <li><a href="#default-services">Default Services</a></li>
        <li><a href="#default-files">Default Files</a></li>
        <li><a href="#journal"><code>journal</code></a></li>
        <li><a href="#files"><code>files</code></a></li>
        <li><a href="#filtering-stages-by-node-hostname">Filtering stages by node hostname</a></li>
        <li><a href="#filtering-stages-with-if-statement">Filtering stages with if statement</a></li>
        <li><a href="#name"><code>name</code></a></li>
        <li><a href="#node"><code>node</code></a></li>
        <li><a href="#modules">Modules</a></li>
      </ul>
    </li>
    <li><a href="#running-commands-on-different-shells">Running commands on different shells</a></li>
  </ul>
</nav>
      </div>
    
            

          </aside>
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            





  
  <div class="pageinfo pageinfo-warning">
    <p>You are viewing the development docs which are in progress. There is no guarantee that the development documentation will be accurate, including instructions, links, and other information. For the latest stable documentation, click
      <a href="https://kairos.io//v3.5.2/docs" target="_blank">here</a>.</p>
  </div>


  


            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="/docs/">Documentation</a></li>
  <li class="breadcrumb-item">
    <a href="/docs/reference/">Reference</a></li>
  <li class="breadcrumb-item active" aria-current="page">
    Configuration</li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>Configuration</h1>
	<div class="lead">Welcome to the Kairos configuration reference page. This page provides details on the fields available in the YAML file used for installing Kairos, a Linux distribution focused on running Kubernetes. This file, written in cloud-config format, allows you to enable Kairos features, configure k3s, and set various other options.</div>
	<header class="article-meta">
		
</header>
	<p>Welcome to the Kairos configuration reference page. This page provides details on the fields available in the YAML file used for installing Kairos, a Linux distribution focused on running Kubernetes. This file, written in cloud-config format, allows you to enable Kairos features, configure k3s, and set various other options.</p>
<p>The structure of the configuration file is as follows:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c">#cloud-config</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># Additional system users</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">users</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;kairos&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">passwd</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;kairos&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">lock_passwd</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">groups</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&#34;admin&#34;</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># ssh_authorized_keys:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># - github:mudler</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># enable debug logging</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">debug</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># Logs configuration for collecting diagnostic information</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># Note: The following are examples of additional services and files to collect.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># The system already includes comprehensive defaults for Kairos services.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">logs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Additional systemd journal services to collect logs from</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">journal</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="s2">&#34;my-custom-service&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="s2">&#34;my-app&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Additional log files to collect (supports glob patterns)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">files</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="s2">&#34;/var/log/myapp/*.log&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="s2">&#34;/var/log/custom/*.log&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># Additional paths for look for cloud-init files</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">cloud-init-paths</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="s2">&#34;/some/path&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># fail on cloud-init errors, defaults to false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">strict</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># The install block is to drive automatic installations without user interaction.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">install</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Device for automated installs</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># This can be either a full device path (so /dev/sda) or you can use the udev facility to identify the disk by UUID, path, label, diskseq or id (/dev/disk/by-{uuid,label,path,diskseq})</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Note that to use a disk by UUID or label, it has first to have that added from userspace, for example with `mkfs.ext4 -L LABEL -U UUID /dev/sda` otherwise disks dont come with UUID/label if they are empty</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">device</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;/dev/sda&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Reboot after installation</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">reboot</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Power off after installation</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">poweroff</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Set to true when installing without Pairing</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">auto</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Override the grub entry name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">grub-entry-name</span><span class="p">:</span><span class="w"> </span><span class="l">Kairos</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># partitions setup</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># setting a partition size key to 0 means that the partition will take over the rest of the free space on the disk</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># after creating the rest of the partitions</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># by default the persistent partition has a value of 0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># if you want any of the extra partitions to fill the rest of the space, you will need to set the persistent partition</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># size to a different value, for example</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># partitions:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c">#   persistent:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c">#     size: 300</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># default partitions</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># only &#39;oem&#39;, &#39;recovery&#39;, &#39;state&#39; and &#39;persistent&#39; objects allowed</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Only size and fs should be changed here</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># size in MiB</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">partitions</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">oem</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="m">60</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">fs</span><span class="p">:</span><span class="w"> </span><span class="l">ext4</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">recovery</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="m">4096</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">fs</span><span class="p">:</span><span class="w"> </span><span class="l">ext4</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># note: This can also be set with dot notation like the following examples for a more condensed view:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># partitions.oem.size: 60</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># partitions.oem.fs: ext4</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># partitions.recovery.size: 4096</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># partitions.recovery.fs: ext4</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># extra partitions to create during install</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># only size, label and fs are used</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># name is used for the partition label, but it&#39;s not really used during the kairos lifecycle. No spaces allowed.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># if no fs is given the partition will be created but not formatted</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># These partitions are not automounted only created and formatted</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">extra-partitions</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">myPartition</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="m">100</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">fs</span><span class="p">:</span><span class="w"> </span><span class="l">ext4</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="l">ONE_PARTITION</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">myOtherPartition</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="m">200</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">fs</span><span class="p">:</span><span class="w"> </span><span class="l">ext4</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="l">TWO_PARTITION</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># no-format: true skips any disk partitioning and formatting</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># If set to true installation procedure will error out if expected</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># partitions are not already present within the disk.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">no-format</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># if no-format is used and Kairos is running over an existing deployment</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># force can be used to force installation.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">force</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Creates these dirs in the rootfs during installation. As the rootfs is RO from boot, sometimes we find that we</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># some applications want to write to non-standard paths like /data</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># If that dir is not already in the rootfs it makes it difficult to create that path on an RO system</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># This allows to create some extra paths in the rootfs that then we count use for mounting or binding via</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># the cloud-config stages</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">extra-dirs-rootfs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="l">/data</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="l">/src</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Override image sizes for active/passive/recovery</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Note that the active+passive images are stored in the state partition and</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># the recovery in the recovery partition, so they should be big enough to accommodate te images sizes set below</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># size in MiB</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">system</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="m">4096</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">passive</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="m">4096</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">recovery-system</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="m">5000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># note: This can also be set with dot notation like the following examples for a more condensed view:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># system.size: 4096</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># passive.size: 4096</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># recovery-system.size: 5000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Use a different source for the installation</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;oci:..&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Add bundles in runtime</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">bundles</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="l">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Set grub options</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">grub_options</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># additional Kernel option cmdline to apply</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">extra_cmdline</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;config_url=http://&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># Same, just for active</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">extra_active_cmdline</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># Same, just for passive</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">extra_passive_cmdline</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># Change GRUB menu entry</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">default_menu_entry</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Environmental variable to set to the installer calls</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">env</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="l">foo=bar</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># custom user mounts</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># bind mounts, can be read and modified, changes persist reboots</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">bind_mounts</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="l">/mnt/bind1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="l">/mnt/bind2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># ephemeral mounts, can be read and modified, changed are discarded at reboot</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">ephemeral_mounts</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># The reset block configures what happens when reset is called</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">reset</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Reboot after reset</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">reboot</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Power off after reset</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">poweroff</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Use a different source for the reset</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;oci:..&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Override the grub entry name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">grub-entry-name</span><span class="p">:</span><span class="w"> </span><span class="l">Kairos</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># if set to true it will format persistent partitions (&#39;oem &#39;and &#39;persistent&#39;)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">reset-persistent</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">reset-oem</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Creates these dirs in the rootfs during reset. As the rootfs is RO from boot, sometimes we find that we</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># some applications want to write to non-standard paths like /data</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># If that dir is not already in the rootfs it makes it difficult to create that path on an RO system</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># This allows to create some extra paths in the rootfs that then we count use for mounting or binding via</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># the cloud-config stages</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">extra-dirs-rootfs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="l">/data</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="l">/src</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># The upgrade block configures what happens when upgrade is called</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">upgrade</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Reboot after upgrade</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">reboot</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Power off after upgrade</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">poweroff</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Use a different source for the upgrade</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;oci:..&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Override the grub entry name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">grub-entry-name</span><span class="p">:</span><span class="w"> </span><span class="l">Kairos</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># if set to true upgrade command will upgrade recovery system instead</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># of main active system</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">recovery</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Override image sizes for active/recovery</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Note that the active+passive images are stored in the state partition and</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># the recovery in the recovery partition, so they should be big enough to accommodate te images sizes set below</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># size in MiB</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># During upgrade only the active or recovery image cna be resized as those are the ones that contain the upgrade</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># passive image is the current system, and that its untouched during the upgrade</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">system</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="m">4096</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">recovery-system</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="m">5000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Creates these dirs in the rootfs during upgrade. As the rootfs is RO from boot, sometimes we find that we</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># some applications want to write to non-standard paths like /data</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># If that dir is not already in the rootfs it makes it difficult to create that path on an RO system</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># This allows to create some extra paths in the rootfs that then we count use for mounting or binding via</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># the cloud-config stages</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">extra-dirs-rootfs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="l">/data</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="l">/src</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">k3s</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Additional env/args for k3s server instances</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">env</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">K3S_RESOLV_CONF</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">K3S_DATASTORE_ENDPOINT</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;mysql://username:password@tcp(hostname:3306)/database-name&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">args</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- --<span class="l">node-label &#34;&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- --<span class="l">data-dir &#34;&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Enabling below it replaces args/env entirely</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># replace_env: true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># replace_args: true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">k3s-agent</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Additional env/args for k3s agent instances</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">env</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">K3S_NODE_NAME</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;foo&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">args</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- --<span class="l">private-registry &#34;...&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Enabling below it replaces args/env entirely</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># replace_env: true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># replace_args: true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># The p2p block enables the p2p full-mesh functionalities.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># To disable, don&#39;t specify one.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">p2p</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Manually set node role. Available: master, worker. Defaults auto (none). This is available</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">role</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;master&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># User defined network-id. Can be used to have multiple clusters in the same network</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">network_id</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;dev&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Enable embedded DNS See also: https://mudler.github.io/edgevpn/docs/concepts/overview/dns/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">dns</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="c"># Disabling DHT makes co-ordination to discover nodes only in the local network</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">disable_dht</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c">#Enabled by default</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="c"># Configures a VPN for the cluster nodes</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">vpn</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">create</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="c"># defaults to true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">use</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="c"># defaults to true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">env</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># EdgeVPN environment options</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">DHCP</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;true&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># Disable DHT (for airgap)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">EDGEVPNDHT</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;false&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">EDGEVPNMAXCONNS</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;200&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># If DHCP is false, it&#39;s required to be given a specific node IP. Can be arbitrary</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ADDRESS</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;10.2.0.30/24&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># See all EDGEVPN options:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># - https://github.com/mudler/edgevpn/blob/master/cmd/util.go#L33</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># - https://github.com/mudler/edgevpn/blob/master/cmd/main.go#L48</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="c"># Automatic cluster deployment configuration</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">auto</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="c"># Enables Automatic node configuration (self-coordination)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="c"># for role assignment</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">enable</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="c"># HA enables automatic HA roles assignment.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="c"># A master cluster init is always required,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="c"># Any additional master_node is configured as part of the </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="c"># HA control plane.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="c"># If auto is disabled, HA has no effect.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">ha</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="c"># Enables HA control-plane</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">enable</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="c"># Number of HA additional master nodes.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="c"># A master node is always required for creating the cluster and is implied.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="c"># The setting below adds 2 additional master nodes, for a total of 3.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">master_nodes</span><span class="p">:</span><span class="w"> </span><span class="m">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="c"># Use an External database for the HA control plane</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">external_db</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;external-db-string&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="c"># network_token is the shared secret used by the nodes to co-ordinate with p2p</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">network_token</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;YOUR_TOKEN_GOES_HERE&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c">## Sets the Elastic IP used in KubeVIP. Only valid with p2p</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kubevip</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">eip</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;192.168.1.110&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Specify a manifest URL for KubeVIP. Empty uses default</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">manifest_url</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Enables KubeVIP</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">enable</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Specifies a KubeVIP Interface</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">interface</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;ens18&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># Additional cloud init syntax can be used here.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># See `stages` below.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">stages</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">network</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Setup users&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">authorized_keys</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">kairos</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="l">github:mudler</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># Standard cloud-init syntax, see: https://github.com/mudler/yip/tree/e688612df3b6f24dba8102f63a76e48db49606b2#compatibility-with-cloud-init-format</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">growpart</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">devices</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;/&#39;</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">runcmd</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="l">foo</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">hostname</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;bar&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">write_files</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">encoding</span><span class="p">:</span><span class="w"> </span><span class="l">b64</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">content</span><span class="p">:</span><span class="w"> </span><span class="l">CiMgVGhpcyBmaWxlIGNvbnRyb2xzIHRoZSBzdGF0ZSBvZiBTRUxpbnV4</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">/foo/bar</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">permissions</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;0644&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">owner</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;bar&#34;</span><span class="w">
</span></span></span></code></pre></div><p>The <code>p2p</code> block is used to enable the p2p full-mesh functionalities of Kairos. If you do not want to use these functionalities, simply don&rsquo;t specify a kairos block in your configuration file.</p>
<p>Inside the <code>p2p</code> block, you can specify the network_token field, which is used to establish the p2p full meshed network. If you do not want to use the full-mesh functionalities, don&rsquo;t specify a network_token value.</p>
<p>The role field allows you to manually set the node role for your Kairos installation. The available options are <code>master</code> and <code>worker</code>, and the default value is auto (which means no role is set).</p>
<p>The <code>network_id</code> field allows you to set a user-defined network ID, which can be used to have multiple Kairos clusters on the same network.</p>
<p>Finally, the <code>dns</code> field allows you to enable embedded DNS for Kairos. For more information on DNS in Kairos, see the link provided in the YAML code above.</p>
<p>That&rsquo;s a brief overview of the structure and fields available in the Kairos configuration file. For more detailed information on how to use these fields, see the examples and explanations provided in the sections below.</p>
<h2 id="syntax">Syntax</h2>
<p>Kairos supports a portion of the standard <a href="https://cloud-init.io/">cloud-init</a> syntax, and the extended syntax which is based on <a href="https://github.com/mudler/yip">yip</a>.</p>
<p>Examples using the extended notation for running K3s as agent or server can be found in the <a href="https://github.com/kairos-io/kairos/tree/master/examples">examples</a>  directory of the Kairos repository.</p>
<p>Here&rsquo;s an example that shows how to set up DNS at the <a href="/docs/architecture/cloud-init/">boot stage</a> using the extended syntax:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c">#cloud-config</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">stages</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">boot</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;DNS settings&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">dns</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">/etc/resolv.conf</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">nameservers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="m">8.8.8.8</span><span class="w">
</span></span></span></code></pre></div>

<div class="alert alert-success" role="alert">
<h4 class="alert-heading">Note</h4>

    <p>Kairos does not use <a href="https://cloud-init.io/">cloud-init</a>. <a href="https://github.com/mudler/yip">yip</a> was created with the goal of being distro agnostic, and does not use Bash at all (with the exception of systemd configurations, which are assumed to be available). This makes it possible to run yip on minimal Linux distros that have been built from scratch.</p>
<p>The rationale behind using yip instead of cloud-init is that it allows Kairos to have very minimal requirements. The cloud-init implementation has dependencies, while yip does not, which keeps the dependency tree small. There is also a CoreOS implementation of cloud-init, but it makes assumptions about the layout of the system that are not always applicable to Kairos, making it less portable.</p>


</div>

<p>The extended syntax can also be used to pass commands through Kernel boot parameters. See the examples below for more details.</p>
<h3 id="test-your-cloud-configs">Test your cloud configs</h3>
<p>Writing YAML files can be a tedious process, and it&rsquo;s easy to make syntax or indentation errors. To make sure your configuration is correct, you can use the cloud-init commands to test your YAML files locally in a container.</p>
<p>Here&rsquo;s an example of how to test your configurations on the <code>initramfs</code> stage using a Docker container:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># List the YAML files in your current directory</span>
</span></span><span class="line"><span class="cl">$ ls -liah
</span></span><span class="line"><span class="cl">total 4,0K
</span></span><span class="line"><span class="cl"><span class="m">9935</span> drwxr-xr-x.  <span class="m">2</span> itxaka itxaka  <span class="m">60</span> may <span class="m">17</span> 11:21 .
</span></span><span class="line"><span class="cl">   <span class="m">1</span> drwxrwxrwt. <span class="m">31</span> root   root   <span class="m">900</span> may <span class="m">17</span> 11:28 ..
</span></span><span class="line"><span class="cl"><span class="m">9939</span> -rw-r--r--.  <span class="m">1</span> itxaka itxaka  <span class="m">59</span> may <span class="m">17</span> 11:21 00_test.yaml
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ cat 00_test.yaml
</span></span><span class="line"><span class="cl">stages:
</span></span><span class="line"><span class="cl">  initramfs:
</span></span><span class="line"><span class="cl">    - commands:
</span></span><span class="line"><span class="cl">      - <span class="nb">echo</span> <span class="s2">&#34;hello!&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Run the cloud-init command on your YAML files in a Docker container</span>
</span></span><span class="line"><span class="cl">$ docker run -ti -v <span class="nv">$PWD</span>:/test --entrypoint /usr/bin/kairos-agent --rm quay.io/kairos/@flavor:@flavorRelease-core-amd64-generic-master run-stage --cloud-init-paths /test initramfs
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Output from the run-stage command</span>
</span></span><span class="line"><span class="cl">INFO<span class="o">[</span>2023-05-17T11:32:09+02:00<span class="o">]</span> kairos-agent version 0.0.0                   
</span></span><span class="line"><span class="cl">INFO<span class="o">[</span>2023-05-17T11:32:09+02:00<span class="o">]</span> Running stage: initramfs.before              
</span></span><span class="line"><span class="cl">INFO<span class="o">[</span>2023-05-17T11:32:09+02:00<span class="o">]</span> Done executing stage <span class="s1">&#39;initramfs.before&#39;</span>      
</span></span><span class="line"><span class="cl">INFO<span class="o">[</span>2023-05-17T11:32:09+02:00<span class="o">]</span> Running stage: initramfs                     
</span></span><span class="line"><span class="cl">INFO<span class="o">[</span>2023-05-17T11:32:09+02:00<span class="o">]</span> Processing stage step <span class="s1">&#39;&#39;</span>. <span class="o">(</span> commands: 1, files: 0, ... <span class="o">)</span> 
</span></span><span class="line"><span class="cl">INFO<span class="o">[</span>2023-05-17T11:32:09+02:00<span class="o">]</span> Command output: hello!                       
</span></span><span class="line"><span class="cl">INFO<span class="o">[</span>2023-05-17T11:32:09+02:00<span class="o">]</span> Done executing stage <span class="s1">&#39;initramfs&#39;</span>             
</span></span><span class="line"><span class="cl">INFO<span class="o">[</span>2023-05-17T11:32:09+02:00<span class="o">]</span> Running stage: initramfs.after               
</span></span><span class="line"><span class="cl">INFO<span class="o">[</span>2023-05-17T11:32:09+02:00<span class="o">]</span> Done executing stage <span class="s1">&#39;initramfs.after&#39;</span>       
</span></span><span class="line"><span class="cl">INFO<span class="o">[</span>2023-05-17T11:32:09+02:00<span class="o">]</span> Running stage: initramfs.before              
</span></span><span class="line"><span class="cl">INFO<span class="o">[</span>2023-05-17T11:32:09+02:00<span class="o">]</span> Done executing stage <span class="s1">&#39;initramfs.before&#39;</span>      
</span></span><span class="line"><span class="cl">INFO<span class="o">[</span>2023-05-17T11:32:09+02:00<span class="o">]</span> Running stage: initramfs                     
</span></span><span class="line"><span class="cl">INFO<span class="o">[</span>2023-05-17T11:32:09+02:00<span class="o">]</span> Done executing stage <span class="s1">&#39;initramfs&#39;</span>             
</span></span><span class="line"><span class="cl">INFO<span class="o">[</span>2023-05-17T11:32:09+02:00<span class="o">]</span> Running stage: initramfs.after               
</span></span><span class="line"><span class="cl">INFO<span class="o">[</span>2023-05-17T11:32:09+02:00<span class="o">]</span> Done executing stage <span class="s1">&#39;initramfs.after&#39;</span>          
</span></span></code></pre></div><h3 id="validate-your-cloud-config">Validate Your Cloud Config</h3>


<div class="alert alert-success" role="alert">
<h4 class="alert-heading">Note</h4>

    Validation of configuration is available on Kairos <a href="https://github.com/kairos-io/kairos/releases/tag/v1.6.0-rc1">v1.6.0-rc1</a> and later. If you&rsquo;re interested in the validation rules or want to build a tool based on it, you can access them online via <code>https://kairos.io/RELEASE/cloud-config.json</code> e.g. <a href="https://kairos.io/v1.6.0/cloud-config.json">v1.6.0 cloud-config.json</a>

</div>

<p>You have two options to validate your Cloud Config, one is with the Kairos command line, and the other with the Web UI.</p>
<h4 id="configuration-validation-via-the-kairos-command-line">Configuration Validation via the Kairos Command Line</h4>
<p>To validate a configuration using the command line, we have introduced the <code>validate</code> command. As an argument you need to pass a URL or local file to be validated, e.g.:</p>
<p>If you had the following <code>cloud-config.yaml</code> in the current working directory</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c">#cloud-config</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">users</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="m">007</span><span class="w">
</span></span></span></code></pre></div><p>You could validate it as follows</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">kairos validate ./cloud-config.yaml
</span></span><span class="line"><span class="cl">jsonschema: <span class="s1">&#39;/users/0/name&#39;</span> does not validate with file:///home/mauro/workspace/kairos/schema.json#/properties/users/items/<span class="nv">$ref</span>/properties/name/type: expected string, but got number
</span></span></code></pre></div><h4 id="configuration-validation-via-web-ui">Configuration Validation via Web UI</h4>
<p>The validation in the Web UI is automatic, all you need to do is copy/paste or type your configuration on the input.</p>
<p><img src="/images/schema-validation-preview.gif" alt="Schema Validation Preview"></p>
<h3 id="using-templates">Using templates</h3>
<p>Fields in the Kairos cloud-init configuration can be templated, which allows for dynamic configuration. Node information is retrieved using the <a href="https://github.com/zcalusic/sysinfo#sample-output">sysinfo</a> library, and can be templated in the <code>commands</code>, <code>file</code>, and <code>entity</code> fields.</p>
<p>Here&rsquo;s an example of how you can use templating in your Kairos configuration:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c">#cloud-config</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">stages</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">foo</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;echo&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">commands</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="l">echo &#34;{{.Values.node.hostname}}&#34;</span><span class="w">
</span></span></span></code></pre></div><p>In addition to standard templating, <a href="http://masterminds.github.io/sprig/">sprig functions</a> are also available for use in your Kairos configuration.</p>
<h4 id="automatic-hostname-at-scale">Automatic Hostname at scale</h4>
<p>You can also use templating to automatically generate hostnames for a set of machines. For example, if you have a single <code>cloud-init</code> file that you want to use for multiple machines, you can use the machine ID (which is generated for each host) to automatically set the hostname for each machine.</p>
<p>Here&rsquo;s an example of how you can do this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c">#cloud-config</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">stages</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">initramfs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Setup hostname&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">hostname</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;node-{{ trunc 4 .MachineID }}&#34;</span><span class="w">
</span></span></span></code></pre></div><p>This will set the hostname for each machine based on the first 4 characters of the machine ID. For example, if the machine ID for a particular machine is <code>abcdef123456</code>, the hostname for that machine will be set to <code>node-abcd</code>.</p>
<h3 id="grub-options">Grub options</h3>
<p>The <code>install.grub_options</code> field in the Kairos configuration file allows you to set key/value pairs for GRUB options that will be set in the GRUB environment after installation.</p>
<p>Here&rsquo;s an example of how you can use this field to set the <code>panic=0</code> boot argument:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c">#cloud-config</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">install</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">grub_options</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">extra_cmdline</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;panic=0&#34;</span><span class="w">
</span></span></span></code></pre></div><p>The table below lists all the available options for the <code>install.grub_options</code> field:</p>
<table>
  <thead>
      <tr>
          <th>Variable</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>next_entry</td>
          <td>Set the next reboot entry</td>
      </tr>
      <tr>
          <td>saved_entry</td>
          <td>Set the default boot entry</td>
      </tr>
      <tr>
          <td>default_menu_entry</td>
          <td>Set the name entries on the GRUB menu</td>
      </tr>
      <tr>
          <td>extra_active_cmdline</td>
          <td>Set additional boot commands when booting into active</td>
      </tr>
      <tr>
          <td>extra_passive_cmdline</td>
          <td>Set additional boot commands when booting into passive</td>
      </tr>
      <tr>
          <td>extra_recovery_cmdline</td>
          <td>Set additional boot commands when booting into recovery</td>
      </tr>
      <tr>
          <td>extra_cmdline</td>
          <td>Set additional boot commands for all entries</td>
      </tr>
      <tr>
          <td>default_fallback</td>
          <td>Sets default fallback logic</td>
      </tr>
  </tbody>
</table>
<p>The order of the cmdline parameters is as follows:</p>
<ol>
<li>Existing cmdline parameters, shipped with Kairos by default and non-modifiable
2.<code>extra_cmdline</code>
3.<code>extra_active_cmdline</code> or <code>extra_passive_cmdline</code> or <code>extra_recovery_cmdline</code> depending on the entry being booted</li>
</ol>
<p>Note that usually parameters for dracut and such are overridable, as they use the latest specified value in the cmdline.</p>
<p>For example, the <code>rd.neednet=0</code> parameter is shipped with Kairos by default, but if you set <code>rd.neednet=1</code> in <code>extra_cmdline</code>, it will override the default value and enable networking during the initramfs stage.</p>
<p>Also note that the <code>grub_options</code> for cmdline are only applied during installation. Changing them after installation won&rsquo;t have any effect.
If you want to change the GRUB options after installation, you can do so by setting those values under the <code>/oem/grubenv</code> file as follows:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">grub2-editenv /oem/grubenv <span class="nb">set</span> <span class="nv">extra_cmdline</span><span class="o">=</span><span class="s2">&#34;rd.neednet=1&#34;</span>
</span></span></code></pre></div><p>As a final note, just a reminder that during GRUB menu selection, you can press <code>e</code> to edit the cmdline for that boot only, which is useful for testing purposes. That allows to test extra cmdline parameters during a single boot before making them permanent.</p>
<h2 id="kubernetes-manifests">Kubernetes manifests</h2>
<p>The <code>k3s</code> distribution of Kubernetes allows you to automatically deploy Helm charts or Kubernetes resources after deployment.</p>
<p>Here&rsquo;s an example of how you can use the <code>k3s</code> configuration file to deploy Fleet out of the box:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Deploy fleet out of the box&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">stages</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">boot</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Copy fleet deployment files&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">files</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">/var/lib/rancher/k3s/server/manifests/fleet-config.yaml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">content</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">            apiVersion: v1
</span></span></span><span class="line"><span class="cl"><span class="sd">            kind: Namespace
</span></span></span><span class="line"><span class="cl"><span class="sd">            metadata:
</span></span></span><span class="line"><span class="cl"><span class="sd">              name: cattle-system
</span></span></span><span class="line"><span class="cl"><span class="sd">            ---
</span></span></span><span class="line"><span class="cl"><span class="sd">            apiVersion: helm.cattle.io/v1
</span></span></span><span class="line"><span class="cl"><span class="sd">            kind: HelmChart
</span></span></span><span class="line"><span class="cl"><span class="sd">            metadata:
</span></span></span><span class="line"><span class="cl"><span class="sd">              name: fleet-crd
</span></span></span><span class="line"><span class="cl"><span class="sd">              namespace: cattle-system
</span></span></span><span class="line"><span class="cl"><span class="sd">            spec:
</span></span></span><span class="line"><span class="cl"><span class="sd">              chart: https://github.com/rancher/fleet/releases/download/v0.3.8/fleet-crd-0.3.8.tgz
</span></span></span><span class="line"><span class="cl"><span class="sd">            ---
</span></span></span><span class="line"><span class="cl"><span class="sd">            apiVersion: helm.cattle.io/v1
</span></span></span><span class="line"><span class="cl"><span class="sd">            kind: HelmChart
</span></span></span><span class="line"><span class="cl"><span class="sd">            metadata:
</span></span></span><span class="line"><span class="cl"><span class="sd">              name: fleet
</span></span></span><span class="line"><span class="cl"><span class="sd">              namespace: cattle-system
</span></span></span><span class="line"><span class="cl"><span class="sd">            spec:
</span></span></span><span class="line"><span class="cl"><span class="sd">              chart: https://github.com/rancher/fleet/releases/download/v0.3.8/fleet-0.3.8.tgz</span><span class="w">
</span></span></span></code></pre></div><p>This configuration will automatically deploy the Fleet Helm chart in the cattle-system namespace after the deployment of <code>k3s</code> using the extended syntax.</p>
<h2 id="kernel-boot-parameters">Kernel boot parameters</h2>
<p>All the configurations can be issued via Kernel boot parameters, for instance, consider to add an user from the boot menu:</p>
<p><code>stages.boot[0].authorized_keys.root[0]=github:mudler</code></p>
<p>Or to either load a config url from network:</p>
<p><code>config_url=http://...</code></p>
<p>Usually secret gists are used to share such config files.</p>
<h2 id="additional-users">Additional users</h2>
<p>Kairos comes with the <code>kairos</code> user pre-configured, however, it is possible to configure additional users to the system via the cloud-init config mechanism</p>
<h3 id="add-a-user">Add a user</h3>
<p>Consider the following example cloud-config, containing the default <code>kairos</code> user (which always has sudo access) and adds the <code>testuser</code> user to the system with admin access:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c">#cloud-config</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">install</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">device</span><span class="p">:</span><span class="w"> </span><span class="l">/dev/sda</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">k3s</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">users</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;kairos&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">passwd</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;kairos&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">ssh_authorized_keys</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="l">github:mudler</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;testuser&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">passwd</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;testuser&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">ssh_authorized_keys</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="l">github:mudler</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">groups</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="s2">&#34;admin&#34;</span><span class="w">
</span></span></span></code></pre></div><p>The above cloud config will be respected on every boot. Adding a user in the config at any point will be reflected on the next boot.
The top level <code>users:</code> key is mapped automatically to a <a href="https://github.com/mudler/yip/blob/4fd77a2709e0d98c25c14925530f74f55d704ac6/pkg/schema/loader_cloudinit.go#L96"><code>boot</code> stage</a>.</p>
<p>For this reason, the above snippet is equivalent to adding the user by explicitly defining the stage. E.g. by creating this file inside <code>/oem</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">stages</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">initramfs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Set user and password&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">users</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">testuser</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">groups</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="s2">&#34;admin&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">passwd</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;mypassword&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">shell</span><span class="p">:</span><span class="w"> </span><span class="l">/bin/bash</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">homedir</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;/home/testuser&#34;</span><span class="w">
</span></span></span></code></pre></div><p>This configuration can be either manually copied over, or can be propagated also via Kubernetes using the system upgrade controller. See <a href="/docs/advanced/after-install/">the after-install</a> section for an example.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">❯ ssh testuser@192.168.1.238
</span></span><span class="line"><span class="cl">testuser@192.168.1.238<span class="err">&#39;</span>s password:
</span></span><span class="line"><span class="cl">Welcome to kairos!
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Refer to https://kairos.io <span class="k">for</span> documentation.
</span></span><span class="line"><span class="cl">localhost:~$ sudo su -
</span></span><span class="line"><span class="cl">localhost:~# whoami
</span></span><span class="line"><span class="cl">root
</span></span><span class="line"><span class="cl">localhost:~# <span class="nb">exit</span>
</span></span><span class="line"><span class="cl">localhost:~$ whoami
</span></span><span class="line"><span class="cl">testuser
</span></span><span class="line"><span class="cl">localhost:~$
</span></span></code></pre></div><h2 id="provider-configs">Provider configs</h2>
<p>Providers are small binaries that can be used to extend the capabilities of Kairos. They are typically used to provide additional functionality or to integrate with external systems like k3s, k0s, rke2, or other Kubernetes distributions or even to provide additional functionality like p2p networking.</p>
<p>This allows to use the same configuration file to install different Kubernetes distributions or to enable additional features like p2p networking.</p>
<p>Below is a list of the configurations available for the current providers.</p>
<p>Note that there is currently more providers available but some are community maintained. You should refer to the provider documentation for more information on how to use them.</p>








<ul class="nav nav-tabs justify-content-end" id="tabs-5" role="tablist">
  <li class="nav-item">
      <button class="nav-link active"
          id="tabs-05-00-tab" data-bs-toggle="tab" data-bs-target="#tabs-05-00" role="tab"
          data-td-tp-persist="k3s" aria-controls="tabs-05-00" aria-selected="true">
        k3s
      </button>
    </li><li class="nav-item">
      <button class="nav-link"
          id="tabs-05-01-tab" data-bs-toggle="tab" data-bs-target="#tabs-05-01" role="tab"
          data-td-tp-persist="k3s-agent" aria-controls="tabs-05-01" aria-selected="false">
        k3s-agent
      </button>
    </li><li class="nav-item">
      <button class="nav-link"
          id="tabs-05-02-tab" data-bs-toggle="tab" data-bs-target="#tabs-05-02" role="tab"
          data-td-tp-persist="k0s" aria-controls="tabs-05-02" aria-selected="false">
        k0s
      </button>
    </li><li class="nav-item">
      <button class="nav-link"
          id="tabs-05-03-tab" data-bs-toggle="tab" data-bs-target="#tabs-05-03" role="tab"
          data-td-tp-persist="k0s-worker" aria-controls="tabs-05-03" aria-selected="false">
        k0s-worker
      </button>
    </li><li class="nav-item">
      <button class="nav-link"
          id="tabs-05-04-tab" data-bs-toggle="tab" data-bs-target="#tabs-05-04" role="tab"
          data-td-tp-persist="kubevip" aria-controls="tabs-05-04" aria-selected="false">
        kubevip
      </button>
    </li><li class="nav-item">
      <button class="nav-link"
          id="tabs-05-05-tab" data-bs-toggle="tab" data-bs-target="#tabs-05-05" role="tab"
          data-td-tp-persist="kubeadm" aria-controls="tabs-05-05" aria-selected="false">
        kubeadm
      </button>
    </li><li class="nav-item">
      <button class="nav-link"
          id="tabs-05-06-tab" data-bs-toggle="tab" data-bs-target="#tabs-05-06" role="tab"
          data-td-tp-persist="p2p" aria-controls="tabs-05-06" aria-selected="false">
        p2p
      </button>
    </li>
</ul>

<div class="tab-content" id="tabs-5-content">
    <div class="tab-body tab-pane fade show active"
        id="tabs-05-00" role="tabpanel" aria-labelled-by="tabs-05-00-tab" tabindex="5">
        <table>
  <thead>
      <tr>
          <th>Key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>k3s.enabled</code></td>
          <td>Enables the k3s server instance. Accepted: <code>true</code>, <code>false</code>.</td>
      </tr>
      <tr>
          <td><code>k3s.env</code></td>
          <td>Additional environment variables for the k3s server instance.</td>
      </tr>
      <tr>
          <td><code>k3s.args</code></td>
          <td>Additional arguments for the k3s server instance.</td>
      </tr>
      <tr>
          <td><code>k3s.replace_env</code></td>
          <td>Replaces all environment variables otherwise passed to k3s by Kairos with those supplied here. Make sure you pass all the environment variables you need.</td>
      </tr>
      <tr>
          <td><code>k3s.replace_args</code></td>
          <td>Replaces all arguments otherwise passed to k3s by Kairos with those supplied here. Make sure you pass all the arguments you need.</td>
      </tr>
      <tr>
          <td><code>k3s.embedded_registry</code></td>
          <td>Enables the embedded registry in k3s. Accepted: <code>true</code>, <code>false</code>.</td>
      </tr>
  </tbody>
</table>
<p>WARNING: The K3s args are only applied when the K3s service is created, which is during installation. Changing the <code>args</code> key after installation won&rsquo;t have any effect.</p>
<p>In order to override an existing k3s install arguments, you need to override the default service ones.</p>
<p>For Alpine services, the trick is to write via cloud config the <code>/etc/rancher/k3s/k3s.env</code> file to set the proper <code>command_args</code> like so:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">stages</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">initramfs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Override k3s environment&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">environment_file</span><span class="p">:</span><span class="w"> </span><span class="l">/etc/rancher/k3s/k3s.env</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">environment</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">command_args</span><span class="p">:</span><span class="w"> </span><span class="l">server --verbose</span><span class="w">
</span></span></span></code></pre></div><p>For systemd services, the usual override methods from systemd itself are available to override any services config, so we can lean on the yip plugin for systemd:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">stages</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">initramfs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Expand k3s modules load&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">systemctl</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">overrides</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l">k3s.service</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">content</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">              [Service]
</span></span></span><span class="line"><span class="cl"><span class="sd">              ExecStartPre=-/sbin/modprobe nfs</span><span class="w">
</span></span></span></code></pre></div>
    </div>
    <div class="tab-body tab-pane fade"
        id="tabs-05-01" role="tabpanel" aria-labelled-by="tabs-05-01-tab" tabindex="5">
        <table>
  <thead>
      <tr>
          <th>Key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>k3s-agent.enabled</code></td>
          <td>Enables the k3s agent instance. Accepted: <code>true</code>, <code>false</code>.</td>
      </tr>
      <tr>
          <td><code>k3s-agent.env</code></td>
          <td>Additional environment variables for the k3s server instance.</td>
      </tr>
      <tr>
          <td><code>k3s-agent.args</code></td>
          <td>Additional arguments for the k3s server instance.</td>
      </tr>
      <tr>
          <td><code>k3s-agent.replace_env</code></td>
          <td>Replaces all environment variables otherwise passed to k3s by Kairos with those supplied here. Make sure you pass all the environment variables you need.</td>
      </tr>
      <tr>
          <td><code>k3s-agent.replace_args</code></td>
          <td>Replaces all arguments otherwise passed to k3s by Kairos with those supplied here. Make sure you pass all the arguments you need.</td>
      </tr>
      <tr>
          <td><code>k3s-agent.embedded_registry</code></td>
          <td>Enables the embedded registry in k3s. Accepted: <code>true</code>, <code>false</code>.</td>
      </tr>
  </tbody>
</table>

    </div>
    <div class="tab-body tab-pane fade"
        id="tabs-05-02" role="tabpanel" aria-labelled-by="tabs-05-02-tab" tabindex="5">
        <table>
  <thead>
      <tr>
          <th>Key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>k0s.enabled</code></td>
          <td>Enables the k0s server instance. Accepted: <code>true</code>, <code>false</code>.</td>
      </tr>
      <tr>
          <td><code>k0s.env</code></td>
          <td>Additional environment variables for the k0s server instance.</td>
      </tr>
      <tr>
          <td><code>k0s.args</code></td>
          <td>Additional arguments for the k0s server instance.</td>
      </tr>
      <tr>
          <td><code>k0s.replace_env</code></td>
          <td>Replaces all environment variables otherwise passed to k3s by Kairos with those supplied here. Make sure you pass all the environment variables you need.</td>
      </tr>
      <tr>
          <td><code>k0s.replace_args</code></td>
          <td>Replaces all arguments otherwise passed to k3s by Kairos with those supplied here. Make sure you pass all the arguments you need.</td>
      </tr>
  </tbody>
</table>

    </div>
    <div class="tab-body tab-pane fade"
        id="tabs-05-03" role="tabpanel" aria-labelled-by="tabs-05-03-tab" tabindex="5">
        <table>
  <thead>
      <tr>
          <th>Key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>k0s-worker.enabled</code></td>
          <td>Enables the k0s worker instance. Accepted: <code>true</code>, <code>false</code>.</td>
      </tr>
      <tr>
          <td><code>k0s-worker.env</code></td>
          <td>Additional environment variables for the k0s worker instance.</td>
      </tr>
      <tr>
          <td><code>k0s-worker.args</code></td>
          <td>Additional arguments for the k0s worker instance.</td>
      </tr>
      <tr>
          <td><code>k0s-worker.replace_env</code></td>
          <td>Replaces all environment variables otherwise passed to k3s by Kairos with those supplied here. Make sure you pass all the environment variables you need.</td>
      </tr>
      <tr>
          <td><code>k0s-worker.replace_args</code></td>
          <td>Replaces all arguments otherwise passed to k0s by Kairos with those supplied here. Make sure you pass all the arguments you need.</td>
      </tr>
  </tbody>
</table>

    </div>
    <div class="tab-body tab-pane fade"
        id="tabs-05-04" role="tabpanel" aria-labelled-by="tabs-05-04-tab" tabindex="5">
        <table>
  <thead>
      <tr>
          <th>Key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>kubevip.enable</code></td>
          <td>Enables kubevip. Accepted: <code>true</code>, <code>false</code>.</td>
      </tr>
      <tr>
          <td><code>kubevip.eip</code></td>
          <td>VIP address to use</td>
      </tr>
      <tr>
          <td><code>kubevip.manifest_url</code></td>
          <td>Download and use the manifest from that url. You can see the default used otherwise <a href="https://github.com/kairos-io/provider-kairos/blob/main/internal/assets/static/kube_vip_rbac.yaml">here</a></td>
      </tr>
      <tr>
          <td><code>kubevip.interface</code></td>
          <td>Interface to use for the Kubevip EIP to attach to</td>
      </tr>
      <tr>
          <td><code>kubevip.static_pod</code></td>
          <td>Use a pod deployment for Kubevip instead of a daemonset. Accepted: <code>true</code>, <code>false</code></td>
      </tr>
      <tr>
          <td><code>kubevip.version</code></td>
          <td>Set the specific Kubevip version to use</td>
      </tr>
  </tbody>
</table>

    </div>
    <div class="tab-body tab-pane fade"
        id="tabs-05-05" role="tabpanel" aria-labelled-by="tabs-05-05-tab" tabindex="5">
        <table>
  <thead>
      <tr>
          <th>Key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>cluster.cluster_token</code></td>
          <td>Unique string that can be used to distinguish different clusters on networks with multiple clusters.</td>
      </tr>
      <tr>
          <td><code>cluster.control_plane_host</code></td>
          <td>Host that all nodes can resolve and use for node registration.</td>
      </tr>
      <tr>
          <td><code>cluster.role</code></td>
          <td>The role of the node in the cluster. Accepted values are <code>master</code>, <code>worker</code>, and <code>none</code>. Defaults to <code>none</code>.</td>
      </tr>
      <tr>
          <td><code>cluster.config</code></td>
          <td>The configuration for the cluster.</td>
      </tr>
      <tr>
          <td><code>cluster.env</code></td>
          <td>List of environment variables to be set on the cluster.</td>
      </tr>
      <tr>
          <td><code>cluster.local_images_path</code></td>
          <td>Path to the local archive images to import.</td>
      </tr>
  </tbody>
</table>

    </div>
    <div class="tab-body tab-pane fade"
        id="tabs-05-06" role="tabpanel" aria-labelled-by="tabs-05-06-tab" tabindex="5">
        <p>As P2P is a very complex topic, we have a dedicated <a href="/docs/installation/p2p/">P2P documentation page</a> that explains how to use it with deep details.</p>

    </div>
</div>

<h2 id="stages">Stages</h2>
<p>The <code>stages</code> key is a map that allows to execute blocks of cloud-init directives during the lifecycle of the node <a href="/docs/architecture/cloud-init/">stages</a>.</p>
<p>A full example of a stage is the following:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c">#cloud-config</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">stages</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="c"># &#34;boot&#34; is the stage</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">boot</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span>- <span class="nt">systemd_firstboot</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">keymap</span><span class="p">:</span><span class="w"> </span><span class="l">us</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span>- <span class="nt">files</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">/tmp/bar</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">content</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">                    test</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">permissions</span><span class="p">:</span><span class="w"> </span><span class="m">0777</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">owner</span><span class="p">:</span><span class="w"> </span><span class="m">1000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="m">100</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;[ ! -e /tmp/bar ]&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span>- <span class="nt">files</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">/tmp/foo</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">content</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">                    test</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">permissions</span><span class="p">:</span><span class="w"> </span><span class="m">0777</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">owner</span><span class="p">:</span><span class="w"> </span><span class="m">1000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="m">100</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">commands</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">echo &#34;test&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">modules</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span>- <span class="l">nvidia</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">environment</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">FOO</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;bar&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">systctl</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">debug.exception-trace</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;0&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">hostname</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;foo&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">systemctl</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">enable</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span>- <span class="l">foo</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">disable</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span>- <span class="l">bar</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">start</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span>- <span class="l">baz</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">mask</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span>- <span class="l">foobar</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">authorized_keys</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">user</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="s2">&#34;github:mudler&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="s2">&#34;ssh-rsa ....&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">dns</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">/etc/resolv.conf</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">nameservers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span>- <span class="m">8.8.8.8</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">ensure_entities</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span>- <span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">/etc/passwd</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">entity</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">                  kind: &#34;user&#34;
</span></span></span><span class="line"><span class="cl"><span class="sd">                  username: &#34;foo&#34;
</span></span></span><span class="line"><span class="cl"><span class="sd">                  password: &#34;pass&#34;
</span></span></span><span class="line"><span class="cl"><span class="sd">                  uid: 0
</span></span></span><span class="line"><span class="cl"><span class="sd">                  gid: 0
</span></span></span><span class="line"><span class="cl"><span class="sd">                  info: &#34;Foo!&#34;
</span></span></span><span class="line"><span class="cl"><span class="sd">                  homedir: &#34;/home/foo&#34;
</span></span></span><span class="line"><span class="cl"><span class="sd">                  shell: &#34;/bin/bash&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">delete_entities</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span>- <span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">/etc/passwd</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">entity</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">                  kind: &#34;user&#34;
</span></span></span><span class="line"><span class="cl"><span class="sd">                  username: &#34;foo&#34;
</span></span></span><span class="line"><span class="cl"><span class="sd">                  password: &#34;pass&#34;
</span></span></span><span class="line"><span class="cl"><span class="sd">                  uid: 0
</span></span></span><span class="line"><span class="cl"><span class="sd">                  gid: 0
</span></span></span><span class="line"><span class="cl"><span class="sd">                  info: &#34;Foo!&#34;
</span></span></span><span class="line"><span class="cl"><span class="sd">                  homedir: &#34;/home/foo&#34;
</span></span></span><span class="line"><span class="cl"><span class="sd">                  shell: &#34;/bin/bash&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">datasource</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;/usr/local/etc&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">providers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="s2">&#34;digitalocean&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="s2">&#34;aws&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="s2">&#34;gcp&#34;</span><span class="w">
</span></span></span></code></pre></div><p>Note multiple stages can be specified, to execute blocks into different stages, consider:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c">#cloud-config</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">stages</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">boot</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span>- <span class="nt">commands</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span>- <span class="l">echo &#34;hello from the boot stage&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">initramfs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span>- <span class="nt">commands</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span>- <span class="l">echo &#34;hello from the boot stage&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span>- <span class="nt">commands</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span>- <span class="l">echo &#34;so much wow, /foo/bar bar exists!&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;[ -e /foo/bar ]&#34;</span><span class="w">
</span></span></span></code></pre></div><h2 id="logs-configuration">Logs Configuration</h2>
<p>The <code>logs</code> configuration allows you to specify additional systemd journal services and log files to collect when using the <code>kairos-agent logs</code> command. This is useful for debugging and issue reporting.</p>
<p>The system already includes comprehensive defaults for Kairos services and common log files. You only need to specify additional services or files that are not covered by the defaults.</p>
<h3 id="default-services">Default Services</h3>
<p>The following services are automatically included:</p>
<ul>
<li><code>kairos-agent</code>, <code>kairos-installer</code>, <code>kairos-webui</code></li>
<li><code>cos-setup-boot</code>, <code>cos-setup-fs</code>, <code>cos-setup-network</code>, <code>cos-setup-reconcile</code></li>
<li><code>k3s</code>, <code>k3s-agent</code>, <code>k0scontroller</code>, <code>k0sworker</code></li>
</ul>
<h3 id="default-files">Default Files</h3>
<p>The following log file patterns are automatically included:</p>
<ul>
<li><code>/var/log/kairos/*.log</code></li>
<li><code>/var/log/*.log</code></li>
<li><code>/run/immucore/*.log</code></li>
</ul>
<h3 id="journal"><code>journal</code></h3>
<p>A list of additional systemd journal service names to collect logs from. Only specify services that are not already included in the defaults.</p>
<h3 id="files"><code>files</code></h3>
<p>A list of additional log file paths to collect. Supports glob patterns for matching multiple files. Only specify files that are not already covered by the default patterns.</p>
<p>Example configuration for adding custom services and files:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c">#cloud-config</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">logs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">journal</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="s2">&#34;my-custom-service&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="s2">&#34;my-app&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">files</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="s2">&#34;/var/log/myapp/*.log&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="s2">&#34;/var/log/custom/*.log&#34;</span><span class="w">
</span></span></span></code></pre></div><p>Below you can find a list of all the supported fields. Mind to replace with the appropriate stage you want to hook into.</p>
<h3 id="filtering-stages-by-node-hostname">Filtering stages by node hostname</h3>
<p>Stages can be filtered using the <code>node</code> key with a hostname value:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c">#cloud-config</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">stages</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">foo</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;echo&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">commands</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="l">echo hello</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">node</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;the_node_hostname_here&#34;</span><span class="w"> </span><span class="c"># Node hostname</span><span class="w">
</span></span></span></code></pre></div><h3 id="filtering-stages-with-if-statement">Filtering stages with if statement</h3>
<p>Stages can be skipped based on if statements:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c">#cloud-config</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">stages</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">foo</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;echo&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">commands</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="l">echo hello</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;cat /proc/cmdline | grep debug&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Test yip!&#34;</span><span class="w">
</span></span></span></code></pre></div><p>The expression inside the <code>if</code> will be evaluated in bash and, if specified, the stage gets executed only if the condition returns successfully (exit 0).</p>
<h3 id="name"><code>name</code></h3>
<p>A description of the stage step. Used only when printing output to console.</p>
<h3 id="node"><code>node</code></h3>
<p>If defined, the node hostname where this stage has to run, otherwise it skips the execution. The node can also be a regexp in the <a href="https://pkg.go.dev/regexp/syntax">Golang format</a>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c">#cloud-config</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">stages</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">boot</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Setup logging&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">node</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;bastion&#34;</span><span class="w">
</span></span></span></code></pre></div><h3 id="modules">Modules</h3>
<p>For each stage, a number of modules are available, that implement various useful functions.
Read more about them in this page: <a href="/docs/reference/stage_modules/">Stage modules</a></p>
<h2 id="running-commands-on-different-shells">Running commands on different shells</h2>
<p>By default, all commands are executed in the <code>sh</code> shell. However, it is possible to run commands in a different shell by prefixing the command with the executable.</p>
<p>For example, to run a command in the <code>bash</code> shell, you can use the following syntax:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c">#cloud-config</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">stages</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">boot.after</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;do something&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">commands</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">bash /path/to/script.sh</span><span class="w">
</span></span></span></code></pre></div>
	<div class="td-page-meta__lastmod">
  Last modified October 20, 2025: <a href="https://github.com/kairos-io/kairos-docs/commit/666b69577ba312ec0edb951f4a1e5633c9755c5a">Fix missing closing code-block (666b695)</a>
</div>

</div>


          </main>
        </div>
      </div>
      <footer class="row d-print-none">
    <div id="footer-content">
        <div>
            <div class="footer-logo">
                
                <img src="/index/footer-logo.png" alt="Kairos Logo" loading="lazy">
                <div class="footer-text">Project supported by <a href="https://spectrocloud.com" target="_blank"> <img src="/img/spectrocloud-dark.svg" class="sclogo" loading="lazy" width="192" height="51" alt="Spectro-Cloud-logo"> </a></div>
            </div>
            <div class="footer-follow-us">Follow us
                <div>
                    <a href="https://www.linkedin.com/company/kairos-oss/" target="_blank">
                        <i class="fa-brands fa-linkedin"></i>
                    </a>
                    <a href="https://github.com/kairos-io/kairos" target="_blank">
                        <i class="fa-brands fa-github"></i>
                    </a>
                    <a href="https://www.youtube.com/@Kairos-IO" target="_blank">
                        <i class="fa-brands fa-youtube"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>
</footer>

    </div>
    <script src="/js/main.min.bf0cab613e991fc11bc28a4a07b0aedef47c7c7c2595703ac3adf962fd6a8099.js" integrity="sha256-vwyrYT6ZH8EbwopKB7Cu3vR8fHwllXA6w635Yv1qgJk=" crossorigin="anonymous"></script>
<script defer src="/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js" integrity="sha256-c0eKfUgHaYrtfjVesj&#43;YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin="anonymous"></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>